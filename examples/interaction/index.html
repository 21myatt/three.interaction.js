<html>

    <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta http-equiv="Cache-Control" content="no-cache">
      <meta name="viewport" content="initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
      <title>DEMO VR</title>
      <style>
        * {
          margin: 0;
        }

        body {
          position: relative;
        }

        #event-box {
          position: absolute;
          width: 100%;
          height: 200px;
          overflow-y: auto;
          background: #ccc;
        }
        #event-box span {
          color: #de3d91;
        }
      </style>
      <script src="//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/vconsole/3.0.0/vconsole.min.js"></script>
      <script>
        new VConsole();
      </script>
    </head>

    <body>
      <div id="event-box"></div>
      <canvas id="webgl"></canvas>
      <script src="../libs/three.js"></script>
      <script src="../../build/three.interaction.js"></script>
      <script>
        window.addEventListener('resize', onWindowResize, false);

        var WIDTH = window.innerWidth;
        var HEIGHT = window.innerHeight;
        var camera = new THREE.PerspectiveCamera(60, WIDTH / HEIGHT, 0.01, 100);
        var renderer = new THREE.WebGLRenderer({
          canvas: document.querySelector('#webgl'),
          antialias: true,
        });
        renderer.setSize(WIDTH, HEIGHT);
        var scene = new THREE.Scene();


        var interactionManager = new THREE.InteractionManager(renderer, scene, camera);

        var cube = new THREE.Mesh(
          new THREE.BoxGeometry(1, 1, 1),
          new THREE.MeshPhongMaterial({ color: 0xaaaaaa })
        );
        cube.cursor = 'pointer';
        cube.position.y = -3;
        cube.position.z = -10;
        scene.add(cube);

        var light = new THREE.PointLight(0xf9cb89);
        light.position.set(20, 50, 10);
        scene.add(light);

        var box = document.querySelector('#event-box');
        cube.on('pointerdown', function(ev) {
          // box.innerHTML = 'dispatch <span>pointerdown</span> event <br/>';
          console.log('pointerdown');
        });
        cube.on('pointermove', function(ev) {
          // box.innerHTML += 'dispatch <span>pointermove</span> event <br/>';
          console.log('pointermove');
        });
        cube.on('pointerup', function(ev) {
          // box.innerHTML += 'dispatch <span>pointerup</span> event <br/>';
          console.log('pointerup');
        });
        cube.on('click', function(ev) {
          // box.innerHTML += 'dispatch <span>click</span> event <br/>';
          console.log('click');
        });
        cube.on('touchstart', function(ev) {
          // box.innerHTML += 'dispatch <span>touchstart</span> event <br/>';
          console.log('touchstart');
        });
        cube.on('touchmove', function(ev) {
          ev.data.originalEvent.preventDefault();
          // box.innerHTML += 'dispatch <span>touchmove</span> event <br/>';
          console.log('touchmove');
        });
        cube.on('touchend', function(ev) {
          // box.innerHTML += 'dispatch <span>touchend</span> event <br/>';
          console.log('touchend');
        });


        function render() {
          cube.rotation.y += 0.01;
          renderer.render(scene, camera);
          requestAnimationFrame(render);
        }
        render();

        function onWindowResize() {
          camera.aspect = window.innerWidth / window.innerHeight;
          camera.updateProjectionMatrix();
          renderer.setSize(window.innerWidth, window.innerHeight);
        }

        // box.addEventListener('touchmove', function(ev){
        //   ev.preventDefault();
        //   box.innerHTML = Math.random();
        //   // console.log('pointerdown', ev);
        // });
        // box.addEventListener('mousedown', function(ev){
        //   ev.preventDefault();
        //   console.log('mousedown', ev);
        //   return false;
        // });
        // box.addEventListener('mouseup', function(ev){
        //   ev.preventDefault();
        //   console.log('mouseup', ev);
        // });
      </script>

    </body>

    </html>
